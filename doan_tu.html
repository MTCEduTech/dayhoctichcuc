<!-- B·∫ÆT ƒê·∫¶U -->
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
<script src="auth.js"></script>
  <title>Tr√≤ ch∆°i m·∫£nh gh√©p ch·ªØ c√°i</title>
  <style>
   body {
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 10px;

    background-image: url('Nen2.jpg');
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: fixed;
  }
    h1 {
      color: yellow;
      margin-bottom: 20px;
      font-family: "Times New Roman", Times, serif;
    }
    #inputArea, #controlArea {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
color: #FFD700;
font-weight: bold;
    }
    #slots, #letters {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      min-height: 60px;
      margin-bottom: 20px;
    }
    .slot, .letter {
      width: 50px;
      height: 50px;
      font-size: 24px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px dashed #999;
      background-color: #f0f0f0;
      cursor: pointer;
      user-select: none;
    }
    .letter {
      border: 2px solid #009688;
      background-color: #E0F2F1;
    }
    .correct {
      border-color: green;
      background-color: #C8E6C9;
    }
    .incorrect {
      border-color: red;
      background-color: #FFCDD2;
    }
    button {
      margin: 5px 5px;
      padding: 6px 15px;
      font-size: 16px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
    }
    button:hover {
      background-color: #388E3C;
    }
    select {
      font-size: 16px;
      margin-left: 10px;
    }
    #timer {
      font-size: 18px;
      margin-top: 10px;
      color: red;
      font-weight: bold;
      font-family: "Times New Roman", Times, serif;
    }
    #infoArea {
      font-size: 20px;
      margin-top: 10px;
      font-family: "Times New Roman", Times, serif;
    }
    #infoArea em {
      color: blue;
      font-weight: bold;
      font-style: normal;
    }

 button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.word-button-blink {
  animation: blink 1s infinite;
}

.blink-alert {
  animation: blink 1s infinite;
  font-size: 20px;
  font-weight: bold;
  padding: 10px;
  border-radius: 8px;
  margin-top: 15px;
}

  </style>

<link rel="stylesheet" href="menu.css">
</head>
<body>
  <h1>TR√í CH∆†I S·∫ÆP X·∫æP K√ù T·ª∞ TH√ÄNH T·ª™ HO√ÄN CH·ªàNH</h1>

  <div id="inputArea">
    <input id="answerInput" placeholder="Nh·∫≠p ƒë√°p √°n t·ª´ c·∫ßn t√¨m ƒë√∫ng" size="25" />
    <input id="hintInput" placeholder="Nh·∫≠p g·ª£i √Ω cho t·ª´" size="30" />
   
<button onclick="hideInput()">·∫®N KHUNG NH·∫¨P</button>
<label for="scoreSelect">Thang ƒëi·ªÉm/t·ª´:</label>
  <select id="scoreSelect" name="scoreSelect">
    <option value="">--Ch·ªçn--</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
  </select> 
  </div>
  <div id="showInputArea" style="display:none;">
    <button onclick="showInput()">HI·ªÜN L·∫†I KHUNG NH·∫¨P</button>

  </div>

  <div id="controlArea">
    TH·ªúI GIAN GH√âP CH·ªÆ CHO M·ªñI T·ª™:
    <select id="timeLimit">
  <option value="0">Kh√¥ng gi·ªõi h·∫°n</option>
  <option value="15">15s</option>
  <option value="30">30s</option>
  <option value="45">45s</option>
  <option value="60">60s (1 ph√∫t)</option>
  <option value="75">75s</option>
  <option value="90">90s</option>
  <option value="105">105s</option>
  <option value="120">120s (2 ph√∫t)</option>
  <option value="135">135s</option>
  <option value="150">150s</option>
  <option value="165">165s</option>
  <option value="180">180s (3 ph√∫t)</option>
  <option value="195">195s</option>
  <option value="210">210s</option>
  <option value="225">225s</option>
  <option value="240">240s (4 ph√∫t)</option>
  <option value="255">255s</option>
  <option value="270">270s</option>
  <option value="285">285s</option>
  <option value="300">300s (5 ph√∫t)</option>
</select>

    <button id="startBtn" onclick="setupGame()">B·∫ÆT ƒê·∫¶U</button>

    <button id="checkBtn" onclick="checkAnswer()" disabled>KI·ªÇM TRA</button>

    <button id="showAnswerBtn" onclick="showAnswer()">HI·ªÜN ƒê√ÅP √ÅN</button>

  </div>

  <div id="timer"></div>
  <div id="slots"></div>
  <div id="letters"></div>
  <div id="infoArea"></div>

  <audio id="correctSound" src="correct.mp3"></audio>
  <audio id="wrongSound" src="wrong.mp3"></audio>

  <script>
let isFromFile = false; // ƒë√°nh d·∫•u c√≥ ƒëang ch∆°i theo file hay kh√¥ng
let correctWordCount = 0;

    let answer = '';
    let timer = null;
    let timeLeft = 0;
let isTimeOutTriggered = false;

    function hideInput() {
      document.getElementById('inputArea').style.display = 'none';
      document.getElementById('showInputArea').style.display = 'block';
    }

    function showInput() {
      document.getElementById('inputArea').style.display = 'block';
      document.getElementById('showInputArea').style.display = 'none';
    }
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }
  function setupGame(forceManual = false) {
	  // üîÑ X√≥a th√¥ng b√°o ch·ªõp c≈© n·∫øu c√≥
document.querySelectorAll('.blink-alert').forEach(el => el.remove());
	  isTimeOutTriggered = false; // reset c·ªù h·∫øt gi·ªù
	  window.answerChecked = false;
  const rawAnswer = document.getElementById('answerInput').value.toUpperCase().replace(/\s/g, '');

  // Ki·ªÉm tra khi kh√¥ng c√≥ d·ªØ li·ªáu
  if (!rawAnswer) {
    // isFromFile c·∫ßn x√°c ƒë·ªãnh r√µ r√†ng l√† true/false tr∆∞·ªõc ƒëo·∫°n n√†y
    if (typeof isFromFile !== 'undefined' && isFromFile) {
      return alert('H√£y click ch·ªçn m·ªôt t·ª´ trong danh s√°ch ph√≠a d∆∞·ªõi!');
    } else {
      return alert('H√£y t·∫°o tr∆∞·ªõc m·ªôt t·ª´ ·ªü khung nh·∫≠p, v√† ·∫©n khung nh·∫≠p ƒë·ªÉ ch∆°i ho·∫∑c m·ªü file ƒë·ªÅ ƒë√£ c√≥ nh√©!');
    }
  }
  answer = rawAnswer;
  const slots = document.getElementById('slots');
  const letters = document.getElementById('letters');
  const timerDisplay = document.getElementById('timer');
  const infoArea = document.getElementById('infoArea');

  slots.innerHTML = '';
  letters.innerHTML = '';
  timerDisplay.textContent = '';
  clearInterval(timer);

  for (let i = 0; i < answer.length; i++) {
    const slot = document.createElement('div');
    slot.className = 'slot';
    slot.ondrop = dropLetter;
    slot.ondragover = allowDrop;
    slot.onclick = removeLetterFromSlot;
    slots.appendChild(slot);
  }

  const charArray = shuffleArray(Array.from(answer));
  charArray.forEach((char, i) => {
    const div = document.createElement('div');
    div.className = 'letter';
    div.textContent = char;
    div.draggable = true;
    div.id = 'letter-' + i;
    div.ondragstart = dragLetter;
    div.ondrop = dropBackToLetters;
    div.ondragover = allowDrop;
div.onclick = handleLetterClick;
    letters.appendChild(div);
  });

  window.letterPositions = [];
  Array.from(letters.children).forEach((el, index) => {
    window.letterPositions.push({ id: el.id, char: el.textContent, index });
  });

  const limit = parseInt(document.getElementById('timeLimit').value);
  if (limit > 0) {
    timeLeft = limit;
    timerDisplay.textContent = 'Th·ªùi gian: ' + timeLeft + 's';
    timerDisplay.style.color = 'white';
    timerDisplay.style.fontWeight = 'bold';
    timer = setInterval(() => {
      timeLeft--;
      timerDisplay.textContent = 'Th·ªùi gian: ' + timeLeft + 's';
      if (timeLeft <= 0) {
        clearInterval(timer);
        timerDisplay.textContent = 'H·∫øt gi·ªù!';
        document.getElementById('showAnswerBtn').disabled = false;
        Array.from(letters.children).forEach(div => {
          div.draggable = false;
          div.ondragstart = null;
          div.style.cursor = 'default';
        });
	      isTimeOutTriggered = true; // ƒê·∫∑t c·ªù
        checkAnswer();
      }
    }, 1000);
  } else {
    document.getElementById('showAnswerBtn').disabled = false;
  }

  infoArea.innerHTML = `
    <div style="
      border: 2px solid #FFD700;
      border-radius: 12px;
      padding: 10px;
      display: inline-block;
      background-color: rgba(255, 255, 255, 0.85);
      color: #000000;
      font-size: 18px;
      text-align: left;
    ">
      <div>üß© S·ªë ch·ªØ c√°i c·ªßa t·ª´ l√†: üëâ <strong>${answer.length}</strong> ch·ªØ c√°i</div>
      <div>üí° G·ª£i √Ω: üëâ <em>${document.getElementById('hintInput').value}</em></div>
    </div>`;

document.getElementById('startBtn').disabled = true;
document.getElementById('startBtn').style.opacity = 0.5;
document.getElementById('startBtn').style.cursor = 'not-allowed';

  document.getElementById('showAnswerBtn').disabled = true;
document.getElementById('checkBtn').disabled = false;

}

    function allowDrop(e) {
      e.preventDefault();
    }

    function dragLetter(e) {
      e.dataTransfer.setData('letter', e.target.textContent);
      e.dataTransfer.setData('id', e.target.id);
    }

    function dropLetter(e) {
  e.preventDefault();
  const letter = e.dataTransfer.getData('letter');
  const id = e.dataTransfer.getData('id');

  if (e.target.textContent !== '') return;

  e.target.textContent = letter;
  e.target.className = 'slot';

  const dragged = document.getElementById(id);
  if (dragged) {
    dragged.style.visibility = 'hidden'; // <-- ch·ªâ ·∫©n ƒëi thay v√¨ x√≥a
    dragged.setAttribute('data-used', 'true'); // ƒë√°nh d·∫•u l√† ƒë√£ d√πng
  }
}


    function dropBackToLetters(e) {
      e.preventDefault();
    }

    function removeLetterFromSlot(e) {
  const slot = e.currentTarget;
  const char = slot.textContent;
  if (!char) return;

  const lettersDiv = document.getElementById('letters');
  const hidden = Array.from(lettersDiv.children).find(
    el => el.textContent === char && el.getAttribute('data-used') === 'true'
  );

  if (hidden) {
    hidden.style.visibility = 'visible';
    hidden.setAttribute('data-used', 'false');
  } else {
    // N·∫øu kh√¥ng t√¨m ƒë∆∞·ª£c ph·∫ßn t·ª≠ ·∫©n, t·∫°o m·ªõi (ph√≤ng h·ªù)
    const newDiv = document.createElement('div');
    newDiv.className = 'letter';
    newDiv.textContent = char;
    newDiv.draggable = true;
    newDiv.id = 'letter-' + Date.now();
    newDiv.ondragstart = dragLetter;
    newDiv.ondrop = dropBackToLetters;
    newDiv.ondragover = allowDrop;
    lettersDiv.appendChild(newDiv);
  }

  slot.textContent = '';
  slot.className = 'slot';
}
function handleLetterClick(e) {
  const letterDiv = e.currentTarget;
  if (letterDiv.getAttribute('data-used') === 'true') return;

  // T√¨m √¥ tr·ªëng ƒë·∫ßu ti√™n
  const emptySlot = Array.from(document.getElementById('slots').children).find(slot => slot.textContent === '');
  if (!emptySlot) return;

  // G√°n ch·ªØ v√† ·∫©n ƒëi
  emptySlot.textContent = letterDiv.textContent;
  emptySlot.className = 'slot';
  letterDiv.style.visibility = 'hidden';
  letterDiv.setAttribute('data-used', 'true');
}

function checkAnswer() {
if (window.answerChecked) return;
  const slots = Array.from(document.getElementById('slots').children);
  const filled = slots.map(slot => slot.textContent).join('');
  const correct = filled === answer;

const info = document.getElementById('infoArea');
if (isTimeOutTriggered) {
  const msg = document.createElement('div');
msg.className = 'blink-alert';
msg.style.color = correct ? 'green' : 'red';
msg.style.backgroundColor = 'white';
msg.style.border = '3px solid ' + (correct ? 'green' : 'red');
msg.style.borderRadius = '12px';
msg.style.padding = '12px 16px';
msg.style.marginTop = '20px';
msg.style.display = 'inline-block';
msg.style.boxShadow = '0 0 10px rgba(0,0,0,0.2)';
msg.innerHTML = correct
  ? '‚úÖ H·∫øt gi·ªù nh∆∞ng b·∫°n ƒë√£ ho√†n th√†nh ƒë√∫ng ‚Äì <strong>ƒê∆Ø·ª¢C T√çNH ƒêI·ªÇM!</strong>'
  : '‚ùå H·∫øt gi·ªù v√† b·∫°n ch∆∞a ho√†n th√†nh ƒë√∫ng ‚Äì <strong>KH√îNG ƒê∆Ø·ª¢C T√çNH ƒêI·ªÇM!</strong>';
const wrapper = document.createElement('div');
wrapper.style.width = '100%';
wrapper.style.marginTop = '10px';
wrapper.appendChild(msg);
info.appendChild(wrapper);
}
  // Ph√°t √¢m thanh ƒë√∫ng ho·∫∑c sai
  const sound = document.getElementById(correct ? 'correctSound' : 'wrongSound');
  sound.play();

  // ƒê√°nh d·∫•u t·ª´ng √¥ ƒë√∫ng ho·∫∑c sai
  slots.forEach((slot, i) => {
    slot.className = 'slot ' + (slot.textContent === answer[i] ? 'correct' : 'incorrect');
  });

  // B·∫≠t l·∫°i c√°c n√∫t ch∆∞a d√πng
  const allButtons = document.querySelectorAll('#wordButtons button');
  allButtons.forEach(btn => {
    if (btn.dataset.clicked === "false") {
      btn.disabled = false;
      btn.style.opacity = 1;
      btn.style.backgroundColor = "blue";
      btn.classList.add("word-button-blink");
    }
  });

  // N·∫øu t·ª´ ƒë√∫ng, tƒÉng s·ªë t·ª´ ƒë√∫ng
  if (correct) {
    correctWordCount++;
  }
window.answerChecked = true; // ƒê√°nh d·∫•u l√† ƒë√£ ki·ªÉm tra t·ª´ n√†y r·ªìi

  // L·∫•y thang ƒëi·ªÉm ƒë∆∞·ª£c ch·ªçn
  const selectedScore = parseInt(document.getElementById('scoreSelect').value || '0');
  const totalScore = correctWordCount * selectedScore;

  const display = document.getElementById('scoreDisplay');
  if (selectedScore > 0) {
    display.textContent = `üéØ T·ª´ ƒë√∫ng: ${correctWordCount} ‚Üí ƒêi·ªÉm: ${totalScore}`;
  } else {
    display.textContent = '‚ö†Ô∏è Ch∆∞a ch·ªçn thang ƒëi·ªÉm!';
  }

  // üëâ ƒê√°nh d·∫•u n√∫t hi·ªán t·∫°i l√† ƒë√£ d√πng
  if (window.currentWordButton) {
    window.currentWordButton.dataset.clicked = "true";
    window.currentWordButton.disabled = true;
    window.currentWordButton.style.backgroundColor = correct ? "green" : "red";
    window.currentWordButton.style.opacity = 1;
    window.currentWordButton.classList.remove("word-button-blink");
  }
// ‚úÖ Reset tr·∫°ng th√°i sau khi xong
isFromFile = false;
window.isManualPlay = false;

  // üëâ B·ªè l∆∞u tr·ªØ n√∫t hi·ªán t·∫°i
  window.currentWordButton = null;

  // Hi·ªÉn th·ªã h√¨nh ·∫£nh ƒë√∫ng/sai
  const resultImage = document.getElementById('resultImage');
  if (correct) {
    resultImage.src = 'chinhxac.png';
    resultImage.alt = 'Ch√≠nh x√°c';
  } else {
    resultImage.src = 'sairoi.png';
    resultImage.alt = 'Sai r·ªìi';
  }
  resultImage.style.display = 'block';

  // T·ª± ·∫©n sau 5 gi√¢y
  setTimeout(() => {
    resultImage.style.display = 'none';
  }, 5000);

document.getElementById('checkBtn').disabled = true;

}

    function showAnswer() {
      const slots = document.getElementById('slots');
      const letters = document.getElementById('letters');
      const timerDisplay = document.getElementById('timer');
      clearInterval(timer);
      timerDisplay.textContent = '';
      slots.innerHTML = '';
      for (let i = 0; i < answer.length; i++) {
        const slot = document.createElement('div');
        slot.className = 'slot correct';
        slot.textContent = answer[i];
        slot.onclick = removeLetterFromSlot;
        slots.appendChild(slot);
      }
      letters.innerHTML = '';
 // ‚úÖ Reset tr·∫°ng th√°i sau khi xong
  isFromFile = false;
  window.isManualPlay = false;
    }
  </script>
<!-- N√∫t c·ªë ƒë·ªãnh c√≥ th·ªÉ k√©o -->
<button class="menu-toggle draggable"><img src="TC.png" alt="Menu" class="menu-icon"></button>
<!-- Overlay -->
<div id="overlay" class="overlay"></div>
<!-- Menu -->
<div id="sideMenu" class="side-menu">
<a href="index.html">üè† Trang ch·ªß</a>
  <a href="vong_quay_so.html">üéØ V√≤ng quay s·ªë</a>
  <a href="vong_quay_ten.html">üë• V√≤ng quay t√™n</a>
  <a href="Ai_la_trieu_phu.html">üí∞ Ai l√† tri·ªáu ph√∫</a>
  <a href="O_Chu_bi_mat.html">üß© T√¨m √î ch·ªØ b√≠ m·∫≠t</a>
  <a href="O_Chu_tron_tim.html">üîç Tinh m·∫Øt t√¨m t·ª´</a>
<a href="doan_tu.html">üî§ Game suy ƒëo√°n t·ª´</a>
  <a href="soan_cau_hoi.html">üìù So·∫°n ƒë·ªÅ TN Tick ch·ªçn + ch·∫•m ƒëi·ªÉm</a>
<a href="sukienVN.html">üìñ Theo d√≤ng s·ª± ki·ªán - l·ªãch s·ª≠ VN</a> 
  <a href="fx-570VN%20Plus.html">üìü Gi·∫£ l·∫≠p Fx-570 + B·∫£ng tu·∫ßn ho√†n NTHH</a>
  <a href="Caro.html">üéÆ Game Caro + Music</a>
  <a href="#" onclick="toggleMenu()">‚ùå ƒê√≥ng Menu</a>

</div>

<div style="
  position: fixed;
  bottom: 20px;
  left: 20px;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 10px;
  align-items: flex-start;
">
  <button id="fullscreen-btn" onclick="toggleFullscreen()" style="
    background-color: #3498db;
    color: white;
    font-weight: bold;
    border: none;
    padding: 10px 15px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
    width: 220px;
    display: block;
transition: background-color 0.3s ease;
  ">
    üì± FULL M√ÄN H√åNH
  </button>
</div>
<script>
/* Toggle fullscreen (d·ª±ng theo English.html) */
function toggleFullscreen() {
    const docElm = document.documentElement;

    // N·∫øu ƒëang fullscreen -> tho√°t
    if (document.fullscreenElement || document.webkitIsFullScreen || document.mozFullScreen || document.msFullscreenElement) {
        if (document.exitFullscreen) {
            document.exitFullscreen();
        } else if (document.mozCancelFullScreen) { // Firefox
            document.mozCancelFullScreen();
        } else if (document.webkitExitFullscreen) { // Chrome, Safari, Opera
            document.webkitExitFullscreen();
        } else if (document.msExitFullscreen) { // IE/Edge
            document.msExitFullscreen();
        }
    } else {
        // V√†o fullscreen
        if (docElm.requestFullscreen) {
            docElm.requestFullscreen();
        } else if (docElm.mozRequestFullScreen) { // Firefox
            docElm.mozRequestFullScreen();
        } else if (docElm.webkitRequestFullscreen) { // Chrome, Safari and Opera
            docElm.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
        } else if (docElm.msRequestFullscreen) { // IE/Edge
            docElm.msRequestFullscreen();
        }
    }
}

/* C·∫≠p nh·∫≠t nh√£n n√∫t khi tr·∫°ng th√°i fullscreen thay ƒë·ªïi (nh·∫•n ESC) */
function updateFullscreenButton() {
    const fullscreenBtn = document.getElementById('fullscreen-btn');
    if (!fullscreenBtn) return;

    const isFullscreen = document.fullscreenElement || document.webkitIsFullScreen || document.mozFullScreen || document.msFullscreenElement;

    if (isFullscreen) {
        fullscreenBtn.innerHTML = '‚ùå FULL M√ÄN H√åNH';
        fullscreenBtn.style.backgroundColor = '#e67e22'; // m√†u khi ƒëang fullscreen
    } else {
        fullscreenBtn.innerHTML = 'üì± FULL M√ÄN H√åNH';
        fullscreenBtn.style.backgroundColor = '#3498db'; // m√†u khi ch∆∞a fullscreen
    }
}

/* L·∫Øng nghe s·ª± ki·ªán thay ƒë·ªïi fullscreen (k√®m c√°c ti·ªÅn t·ªë cho tr√¨nh duy·ªát) */
document.addEventListener('fullscreenchange', updateFullscreenButton);
document.addEventListener('webkitfullscreenchange', updateFullscreenButton);
document.addEventListener('mozfullscreenchange', updateFullscreenButton);
document.addEventListener('MSFullscreenChange', updateFullscreenButton);

/* Kh·ªüi t·∫°o tr·∫°ng th√°i n√∫t (n·∫øu trang load m√† ƒëang fullscreen) */
document.addEventListener('DOMContentLoaded', updateFullscreenButton);
</script>

<script>
document.getElementById('createFileBtn').addEventListener('click', function() {
  const defaultContent = "[N·ªôi dung ph·∫£i theo ƒë·ªãnh d·∫°ng ƒê√ÅP √ÅN|G·ª¢I √ù (v√≠ d·ª•: VIETNAM|ƒê·∫•t n∆∞·ªõc h√¨nh ch·ªØ S)]\n";
  const blob = new Blob([defaultContent], { type: 'text/plain;charset=utf-8' });
  const url = URL.createObjectURL(blob);

  const a = document.createElement('a');
  a.href = url;
  a.download = 'de_moi.txt';
  document.body.appendChild(a);
  a.click();

  document.body.removeChild(a);
  URL.revokeObjectURL(url);
});


</script>
<!-- C·ªë ƒë·ªãnh 2 n√∫t ·ªü g√≥c tr√™n b√™n ph·∫£i -->
<div style="position: fixed; top: 40px; right: 20px; z-index: 1001; display: flex; flex-direction: column; align-items: flex-end; gap: 10px;">
  <button id="createFileBtn"
    onclick="downloadSample()"
    style="background-color: #32CD32; color: white; font-weight: bold; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;">
    üìù SO·∫†N 01 ƒê·ªÄ .txt
  </button>

  <input type="file" id="fileInput" accept=".txt" style="display: none;" />
  <button onclick="document.getElementById('fileInput').click()" 
    style="background-color: #1E90FF; color: white; font-weight: bold; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;">
    üìÇ M·ªû ƒê·ªÄ T·ª™ FILE
  </button>

<div style="height: 10px;"></div>
<div style="text-align: center;">
  <img id="resultImage" src="" alt="" style="
    margin-top: 8px;
    max-width: 200px;
    border-radius: 10px;
    display: none;
  " />
</div>

<div id="scoreDisplay" style="
  margin-top: 8px;
  width: 100%;
  max-width: 230px;
  height: 50px;
  border-radius: 10px;
  background-color: #fffbe6;
  border: 2px solid #f0c040;
  color: #333;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 16px;
  font-family: 'Times New Roman', serif;
  box-shadow: 0 0 6px rgba(0,0,0,0.1);
">
  ƒêi·ªÉm: ch∆∞a ch·ªçn
</div>

</div>

<div style="position: fixed; bottom: 20px; right: 20px; z-index: 1001; display: flex; flex-direction: column; align-items: flex-end; gap: 10px;">
 
<!-- N√∫t RESET -->
<button onclick="resetGame()" style="background-color: orange; color: white; font-weight: bold; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;">
  üîÑ RESET L√ÄM M·ªöI
</button>
  
  <!-- N√∫t V·ªÄ TRANG CH·ª¶ -->
  <button onclick="window.location.href='index.html'" style="background-color: red; color: white; font-weight: bold; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;">
    üè† V·ªÄ TRANG CH·ª¶
  </button>
</div>


<!-- Khu v·ª±c t·∫°o c√°c n√∫t t·ª´ s·ªë ‚Äì n·∫±m ngang, cƒÉn gi·ªØa d∆∞·ªõi -->
<div id="wordButtons" style="
  position: fixed;
  bottom: 80px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1001;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  padding: 10px;
  background-color: rgba(255, 255, 255, 0.8);
  border-radius: 12px;
  box-shadow: 0 0 10px rgba(0,0,0,0.2);
"></div>

<script>
function downloadSample() {
  const content = `VIETNAM|ƒê·∫•t n∆∞·ªõc h√¨nh ch·ªØ S
HANOI|Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam
SAIGON|T√™n c≈© c·ªßa TP HCM`;
  const blob = new Blob([content], { type: "text/plain" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "mau_de_nhieu_cau.txt";
  link.click();
}
</script>
<script>
document.getElementById('fileInput').addEventListener('change', function(event) {
  const file = event.target.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = function(e) {
isFromFile = true;
    let lines = e.target.result.trim().split('\n').filter(l => l.includes('|'));
    if (lines.length === 0) return alert("File kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng.");

    // Tr·ªôn ng·∫´u nhi√™n
    for (let i = lines.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [lines[i], lines[j]] = [lines[j], lines[i]];
correctWordCount = 0;
    }

    const wordButtons = document.getElementById('wordButtons');
    wordButtons.innerHTML = "";

// ·∫®n khung nh·∫≠p v√† v√¥ hi·ªáu h√≥a n√∫t hi·ªán l·∫°i
document.getElementById('inputArea').style.display = 'none';
document.getElementById('showInputArea').style.display = 'block';
document.querySelector('#showInputArea button').disabled = true;
document.querySelector('#showInputArea button').style.opacity = 0.5;
document.querySelector('#showInputArea button').style.cursor = 'not-allowed';

   lines.forEach((line, index) => {
  const [ans, hint] = line.split('|');
  const btn = document.createElement('button');
  btn.textContent = "T·ª´ s·ªë " + (index + 1);
  btn.style.backgroundColor = "blue";
  btn.style.color = "white";
  btn.style.border = "none";
  btn.style.borderRadius = "5px";
  btn.style.padding = "5px 10px";
  btn.style.cursor = "pointer";
  btn.dataset.clicked = "false"; // <-- tr·∫°ng th√°i ban ƒë·∫ßu
btn.classList.add("word-button-blink"); // <-- hi·ªáu ·ª©ng n√∫t ‚Äúch∆∞a click‚Äù

  btn.onclick = () => {
    if (btn.dataset.clicked === "true") return;
btn.classList.remove("word-button-blink");

      window.currentWordButton = btn;

    document.getElementById('answerInput').value = ans.trim();
    document.getElementById('hintInput').value = hint.trim();
    setupGame();

    // V√¥ hi·ªáu h√≥a t·∫•t c·∫£ c√°c n√∫t khi ƒëang ch∆°i 1 t·ª´
    const allButtons = document.querySelectorAll('#wordButtons button');
    allButtons.forEach(b => {
      b.disabled = true;
      b.style.opacity = 0.5;
    });
  };

  wordButtons.appendChild(btn);
});

  };

  reader.readAsText(file, 'UTF-8');
});

function resetGame() {
  correctWordCount = 0;
  document.getElementById('scoreDisplay').textContent = "ƒêi·ªÉm: ch∆∞a ch·ªçn";
  location.reload(); // ho·∫∑c b·∫°n c√≥ th·ªÉ ch·ªâ l√†m s·∫°ch UI n·∫øu kh√¥ng mu·ªën t·∫£i l·∫°i to√†n trang
}

</script>

<script src="menu.js"></script>
<script src="chao_name.js"></script>

</body>
</html>
<!-- K·∫æT TH√öC -->
